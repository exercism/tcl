#!/usr/bin/env tclsh
package require tcltest
namespace import ::tcltest::*
proc skip {args} {
    if {!([info exists ::env(RUN_ALL)] && $::env(RUN_ALL))} {
        ::tcltest::skip {*}$args
    }
}

# two lists have the same elements, in no particular order
proc unorderedListMatch {expected actual} {
    if {[llength $expected] != [llength $actual]} {
        return false
    }
    foreach elem $expected {
        if {[lsearch -exact $actual $elem] == -1} {
            return false
        }
    }
    return true
}
customMatch list unorderedListMatch

############################################################
source "saddle-points.tcl"

test sp-1 "Can identify single saddle point"  -body {
        saddlePoints { {9 8 7}
          {5 3 2}
          {6 6 7} }
} -returnCodes ok -match list -result {{2 1}}

skip sp-2
test sp-2 "Can identify that empty matrix has no saddle points" -body {
        saddlePoints { {} }
} -returnCodes ok -match list -result {}

skip sp-3
test sp-3 "Can identify lack of saddle points when there are none" -body {
        saddlePoints { {1 2 3}
          {3 1 2}
          {2 3 1} }
} -returnCodes ok -match list -result {}

skip sp-4
test sp-4 "Can identify multiple saddle points in a column" -body {
        saddlePoints { {4 5 4}
          {3 5 5}
          {1 5 4} }
} -returnCodes ok -match list -result {{1 2} {2 2} {3 2}}

skip sp-5
test sp-5 "Can identify multiple saddle points in a row" -body {
        saddlePoints { {6 7 8}
          {5 5 5}
          {7 5 6} }
} -returnCodes ok -match list -result {{2 1} {2 2} {2 3}}

skip sp-6
test sp-6 "Can identify saddle point in bottom right corner" -body {
        saddlePoints { {8 7 9}
          {6 7 6}
          {3 2 5} }
} -returnCodes ok -match list -result {{3 3}}

skip sp-7
test sp-7 "Can identify saddle points in a non square matrix" -body {
        saddlePoints { {3 1 3}
          {3 2 4} }
} -returnCodes ok -match list -result {{1 3} {1 1}}

skip sp-8
test sp-8 "Can identify that saddle points in a single column matrix are those with the minimum value" -body {
        saddlePoints { {2}
          {1}
          {4}
          {1} }
} -returnCodes ok -match list -result {{2 1} {4 1}}

skip sp-9
test sp-9 "Can identify that saddle points in a single row matrix are those with the maximum value" -body {
        saddlePoints { {2 5 3 5} }
} -returnCodes ok -match list -result {{1 2} {1 4}}

cleanupTests
